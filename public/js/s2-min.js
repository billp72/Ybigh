sbVertexShader=["varying vec3 vWorldPosition;","void main() {","  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","  vWorldPosition = worldPosition.xyz;","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),sbFragmentShader=["uniform vec3 topColor;","uniform vec3 bottomColor;","uniform float offset;","uniform float exponent;","varying vec3 vWorldPosition;","void main() {","  float h = normalize( vWorldPosition + offset ).y;","  gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( h, exponent ), 0.0 ) ), 1.0 );","}"].join("\n");let Ybigh=[{word:"Food: mans view of himself",x:-5,y:15,z:50,color:16776983},{word:"Food: mans connection with other than himself",x:-5,y:5,z:50,color:6664805},{word:"Food: mans view of the world",x:-5,y:-5,z:50,color:3947775},{word:"Food: mans physical activities",x:-5,y:-15,z:50,color:16721446}],informationArrows=[{x:-8.38,y:19.5,z:10.7,rotationX:.1,rotationY:1,rotationZ:0,name:"beauty-arrow",label:"towards beauty"},{x:-7.7,y:-17.9,z:6.5,rotationX:.99,rotationY:.99,rotationZ:0,name:"peril-arrow",label:"towards peril"}],centerObjects=[{x:-7,y:2.9,z:-.1,width:7,colorBottom:16777215,colorSide:1061725,colorTop:0,name:"beauty",opacity:0},{x:-7,y:.3,z:-.1,width:7,colorBottom:16777215,colorSide:16777215,colorTop:0,name:"signularity",opacity:1},{x:-7,y:-2.3,z:-.1,width:7,colorBottom:16777215,colorSide:1061725,colorTop:0,name:"peril",opacity:0}],indifferenceBox=[{x:-7.4,y:1,z:16,length:43.4,depth:.5,width:10,name:"indifferentleft"},{x:-22.9,y:1,z:0,length:12.5,depth:.5,width:30,name:"indifferentback"},{x:-7.4,y:1,z:-15.9,length:43.4,depth:.5,width:10,name:"indifferentright"},{x:8,y:1,z:0,length:12.5,depth:.5,width:30,name:"indifferentfront"}];var ybigh={scene:null,camera:null,renderer:null,container:null,controls:null,clock:null,plane:null,selection:null,offset:new THREE.Vector3,objects:[],raycaster:new THREE.Raycaster,textlabels:[],centerCube:[],indifferenceArray:[],torus:null,elem:null,info:null,closeWindow:null,selections:[],selection01:null,selection02:null,selection04:null,selection08:null,state:null,data:null,UIBlock:document.getElementById("overlay"),requestData:function(e){ybigh.UIBlock.style.display="block",window.setTimeout(function(){e()},1e3)},init:function(){this.scene=new THREE.Scene,this.scene.fog=new THREE.FogExp2(13426943,3e-4);var e=window.innerWidth,t=window.innerHeight,i=e/t;this.camera=new THREE.PerspectiveCamera(35,i,1,1e3),this.scene.add(this.camera),this.camera.position.set(100,0,0),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(e,t),this.renderer.setClearColor(this.scene.fog.color),this.container=document.createElement("div"),document.body.appendChild(this.container),this.container.appendChild(this.renderer.domElement);THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry.prototype.constructor=THREE.TetrahedronGeometry;let o=new THREE.TorusGeometry(20,.3,16,100,1.2*Math.PI),n=new THREE.MeshBasicMaterial({color:0,transparent:!0,opacity:.05}),s=new THREE.Mesh(o,n);s.position.z=15,s.position.x=-8,s.rotation.y=29.87,s.rotation.x=2,this.scene.add(s);for(var r,a,l=new THREE.TetrahedronGeometry(2,0,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1]),c=0;c<informationArrows.length;c++){r=new THREE.MeshBasicMaterial({color:0,transparent:!0,opacity:.05}),(a=new THREE.Mesh(l.clone(),r)).position.z=informationArrows[c].z,a.position.x=informationArrows[c].x,a.position.y=informationArrows[c].y,a.rotation.y=informationArrows[c].rotationY,a.rotation.x=informationArrows[c].rotationX,a.name=informationArrows[c].name;let e=this._createTextLabel("info-text",informationArrows[c].name,"block");e.setHTML(informationArrows[c].label),e.setParent(a),this.textlabels.push(e),this.container.appendChild(e.element),this.scene.add(a)}THREEx.WindowResize(this.renderer,this.camera),document.addEventListener("mousedown",this.onDocumentMouseDown,!1),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),document.addEventListener("mouseup",this.onDocumentMouseUp,!1),document.getElementById("submit").addEventListener("click",ybigh.submit),document.getElementById("check").addEventListener("click",ybigh.submit),document.getElementById("next").addEventListener("click",ybigh.getSymbol),this.elem=document.getElementById("msg"),this.info=document.getElementById("info"),this.closeWindow=document.getElementById("closew"),this.controls=new THREE.OrbitControls(this.camera),this.controls.target=new THREE.Vector3(0,0,0),this.controls.maxDistance=150,this.clock=new THREE.Clock,this.scene.add(new THREE.AmbientLight(4473924));var h=new THREE.DirectionalLight(16777215);h.position.set(200,200,1e3).normalize(),this.camera.add(h),this.camera.add(h.target);for(var d=0;d<centerObjects.length;d++){let e=new THREE.CylinderGeometry(centerObjects[d].width,centerObjects[d].width,2,32,1,!1);centerObjects[d].wire&&centerObjects[d].wire;for(var y=e.faces.length,m=0;m<y;m++)e.faces[m].materialIndex=m<64?0:m>63&&m<96?1:2;var b=new THREE.MeshBasicMaterial({color:centerObjects[d].colorTop,transparent:!0,opacity:centerObjects[d].opacity}),g=new THREE.MeshBasicMaterial({color:centerObjects[d].colorSide,transparent:!0,opacity:centerObjects[d].opacity}),p=new THREE.MeshBasicMaterial({color:centerObjects[d].colorBottom,transparent:!0,opacity:centerObjects[d].opacity}),u=[];u.push(g),u.push(b),u.push(p);var f=new THREE.MeshFaceMaterial(u),E=new THREE.Mesh(e.clone(),f);E.position.x=centerObjects[d].x,E.position.y=centerObjects[d].y,E.position.z=centerObjects[d].z,E.rotation.x=3.15,E.name=centerObjects[d].name,this.centerCube.push(E),this.scene.add(E)}for(m=0;m<indifferenceBox.length;m++){var w=new THREE.BoxGeometry(indifferenceBox[m].length,indifferenceBox[m].depth,indifferenceBox[m].width),x=new THREE.MeshBasicMaterial({color:5789784,transparent:!0,opacity:1}),T=new THREE.Mesh(w,x);T.position.x=indifferenceBox[m].x,T.position.y=indifferenceBox[m].y,T.position.z=indifferenceBox[m].z,this.scene.add(T),this.indifferenceArray.push(T)}THREE.ImageUtils.crossOrigin="";var v=THREE.ImageUtils.loadTexture("http://netcreative.org/getJSON.php/Ybigh/app/getJSON.php?img=something"),H=new THREE.TorusGeometry(12,9,21,20);x=new THREE.MeshBasicMaterial({map:v,transparent:!0,opacity:.9});this.torus=new THREE.Mesh(H,x),this.torus.name="torus tetrahedron",this.torus.position.y=1,this.torus.position.x=-7,this.torus.rotation.x=-4.716,this.torus.rotation.y=0,this.torus.rotation.z=0,this.scene.add(this.torus),this.addSkybox(),this.plane=new THREE.Mesh(new THREE.PlaneBufferGeometry(300,300,8,8),new THREE.MeshBasicMaterial({color:13426943})),this.plane.visible=!1,this.scene.add(this.plane);var R,B,M=new THREE.CylinderGeometry(3.6,3.8,1.5,20);for(d=0;d<Ybigh.length;d++){B=new THREE.MeshBasicMaterial({color:Ybigh[d].color,transparent:!0,opacity:1}),R=new THREE.Mesh(M.clone(),B),this.objects.push(R),R.position.x=Ybigh[d].x,R.position.y=Ybigh[d].y,R.position.z=Ybigh[d].z,R.rotation.x=0,R.rotation.y=1.7,R.rotation.z=0,R.name=Ybigh[d].word.replace(/\s+/g,""),this.scene.add(R);let e=this._createTextLabel("text-label",Ybigh[d].word.replace(/\s+/g,""),"block");var z=Ybigh[d].word.split(":"),j="<span class='term'>"+z[0]+"</span>";z.splice(0,1,j),e.setHTML(z.join(":")),e.setParent(R),this.textlabels.push(e),this.container.appendChild(e.element)}ybigh.UIBlock.style.display="none"},addSkybox:function(){var e={topColor:{type:"c",value:new THREE.Color(14803442)},bottomColor:{type:"c",value:new THREE.Color(16777215)},offset:{type:"f",value:300},exponent:{type:"f",value:1.5}},t=new THREE.SphereGeometry(300,32,32);skyMat=new THREE.ShaderMaterial({vertexShader:sbVertexShader,fragmentShader:sbFragmentShader,uniforms:e,side:THREE.DoubleSide,fog:!1}),skyMesh=new THREE.Mesh(t,skyMat),this.scene.add(skyMesh)},setForCollision:function(e){let t=(new THREE.Box3).setFromObject(this.torus),i=(new THREE.Box3).setFromObject(this.centerCube[0]),o=(new THREE.Box3).setFromObject(this.centerCube[1]),n=(new THREE.Box3).setFromObject(this.centerCube[2]),s=(new THREE.Box3).setFromObject(e),r=(new THREE.Box3).setFromObject(this.indifferenceArray[0]),a=(new THREE.Box3).setFromObject(this.indifferenceArray[1]),l=(new THREE.Box3).setFromObject(this.indifferenceArray[2]),c=(new THREE.Box3).setFromObject(this.indifferenceArray[3]),h=document.createElement("LI"),d=document.createElement("LI"),y=document.createElement("LI"),m=null;if(s.isIntersectionBox(t)){let t=document.getElementById("submit");t.disabled=!1,t.style.backgroundColor="#4f87ff",t.style.cursor="pointer",ybigh.state="torus",ybigh.elem.style.backgroundColor="#2f96b4",e.torus=!0,this.info.style.display="block",e.tmsg="touching the torus",d.className="torus";let i=document.createTextNode(e.tmsg);d.appendChild(i),ybigh.elem.appendChild(d),m=window.setTimeout(function(){if(e.torus){for(ybigh.elem.style.backgroundColor="transparent";ybigh.elem.firstChild;)ybigh.elem.removeChild(ybigh.elem.firstChild);ybigh.info.style.display="none"}window.clearInterval(m)},1e4)}if(s.isIntersectionBox(i)){ybigh.state="very good",e.peril||(e.beauty=!0),e.msg="your are touching very good";let t=document.createTextNode(e.msg);y.appendChild(t),y.className="good",ybigh.elem.insertBefore(y,ybigh.elem.childNodes[0])}else if(s.isIntersectionBox(n)){ybigh.state="very ill",e.beauty||(e.peril=!0),e.msg="you are touching very ill";let t=document.createTextNode(e.msg);y.appendChild(t),y.className="ill",ybigh.elem.insertBefore(y,ybigh.elem.childNodes[0])}else if(s.isIntersectionBox(o))if(s.isIntersectionBox(r)&&s.isIntersectionBox(l)&&s.isIntersectionBox(a)&&s.isIntersectionBox(c))e.beauty=!1;else{e.beauty?(ybigh.state="beauty",e.msg="you are touching beauty",e.position.set(-7,10,1),e.material.color.setHex(16777215)):e.peril?(ybigh.state="peril",e.msg="you are touching peril",e.position.set(-7.5,-10,1),e.material.color.setHex(0)):(e.msg="illegal operation",e.position.set(-7,20,10));let t=document.createTextNode(e.msg);y.appendChild(t),y.className="singularity",ybigh.elem.insertBefore(y,ybigh.elem.childNodes[0])}if(s.isIntersectionBox(r)||s.isIntersectionBox(l)||s.isIntersectionBox(a)||s.isIntersectionBox(c)){ybigh.state="indifferent",e.indifferent=!0,this.info.style.display="block",e.tmsg1="touching indifferent",h.className="indifferent";let t=document.createTextNode(e.tmsg1);h.appendChild(t),e.material.color.setHex(8421504),ybigh.elem.insertBefore(h,ybigh.elem.childNodes[0])}var b=e.name.split(":");if(ybigh.state)switch(b[1]){case"mansviewofhimself":ybigh.selection01={symbol:b[0],x:e.position.x,y:e.position.y,z:e.position.z,category:1,message:ybigh.state};break;case"mansconnectionwithotherthanhimself":ybigh.selection02={symbol:b[0],x:e.position.x,y:e.position.y,z:e.position.z,category:2,message:ybigh.state};break;case"mansviewoftheworld":ybigh.selection08={symbol:b[0],x:e.position.x,y:e.position.y,z:e.position.z,category:8,message:ybigh.state};break;case"mansphysicalactivities":ybigh.selection04={symbol:b[0],x:e.position.x,y:e.position.y,z:e.position.z,category:4,message:ybigh.state}}this.closeWindow.addEventListener("click",function(){ybigh.info.style.display="none"})},_createTextLabel:function(e,t,i){var o=document.createElement("div");o.className=e,o.id=t,o.style.position="absolute",o.style.display=i,o.innerHTML="hi there!",o.style.top=-1e3,o.style.left=-1e3;var n=this;return{element:o,parent:!1,position:new THREE.Vector3(0,0,0),setHTML:function(e){this.element.innerHTML=e},setParent:function(e){this.parent=e},updatePosition:function(){parent&&this.position.copy(this.parent.position);var e=this.get2DCoords(this.position,n.camera);this.element.style.left=e.x+"px",this.element.style.top=e.y+"px"},get2DCoords:function(e,t){var i=e.project(t);return i.x=(i.x+1)/2*window.innerWidth+12,i.y=-(i.y-1)/2*window.innerHeight-20,i}}},onDocumentMouseDown:function(e){e.preventDefault();var t=e.clientX/window.innerWidth*2-1,i=-e.clientY/window.innerHeight*2+1,o=new THREE.Vector3(t,i,1);if(o.unproject(ybigh.camera),ybigh.raycaster.set(ybigh.camera.position,o.sub(ybigh.camera.position).normalize()),(n=ybigh.raycaster.intersectObjects(ybigh.objects)).length>0){ybigh.controls.enabled=!1,ybigh.selection=n[0].object,ybigh.selection.material.opacity=.5,ybigh.selection.beauty&&(delete ybigh.selection.beauty,ybigh.selection.material.color.setHex(11373872)),ybigh.selection.peril&&(delete ybigh.selection.peril,ybigh.selection.material.color.setHex(11373872)),ybigh.selection.indifferent&&(delete ybigh.selection.indifferent,ybigh.selection.material.color.setHex(11373872));var n=ybigh.raycaster.intersectObject(ybigh.plane);ybigh.offset.copy(n[0].point).sub(ybigh.plane.position)}},onDocumentMouseMove:function(e){e.stopPropagation(),e.preventDefault();var t=e.clientX/window.innerWidth*2-1,i=-e.clientY/window.innerHeight*2+1,o=new THREE.Vector3(t,i,1);if(o.unproject(ybigh.camera),ybigh.raycaster.set(ybigh.camera.position,o.sub(ybigh.camera.position).normalize()),ybigh.selection){var n=ybigh.raycaster.intersectObject(ybigh.plane);ybigh.selection.position.copy(n[0].point.sub(ybigh.offset)),ybigh.setForCollision(ybigh.selection)}else{(n=ybigh.raycaster.intersectObjects(ybigh.objects)).length>0&&(ybigh.plane.position.copy(n[0].object.position),ybigh.plane.lookAt(ybigh.camera.position))}},onDocumentMouseUp:function(e){e.preventDefault(),ybigh.controls.enabled=!0,ybigh.selection.material.opacity=1,ybigh.selection=null},submit:function(e){if(ybigh.selections.length=0,ybigh.selection01&&ybigh.selections.push(ybigh.selection01),ybigh.selection02&&ybigh.selections.push(ybigh.selection02),ybigh.selection04&&ybigh.selections.push(ybigh.selection04),ybigh.selection08&&ybigh.selections.push(ybigh.selection08),"check"===e.target.id)alert(JSON.stringify(ybigh.selections));else{let e=document.getElementById("next");e.disabled=!1,e.style.backgroundColor="#4f87ff",e.style.cursor="pointer",console.log(ybigh.selections)}},getSymbol:function(t){console.log(e.target.id)}};function animate(){requestAnimationFrame(animate),render(),update()}function update(){var e=ybigh.clock.getDelta();ybigh.controls.update(e)}function render(){if(ybigh.renderer){for(var e=0;e<ybigh.textlabels.length;e++)ybigh.textlabels[e].updatePosition();ybigh.renderer.render(ybigh.scene,ybigh.camera)}}function initializeYbigh(){ybigh.requestData(function(){ybigh.init(),animate()})}window.initializeYbigh?window.addEventListener("load",initializeYbigh,!1):window.attachEvent?window.attachEvent("onload",initializeYbigh):window.onload=initializeYbigh;