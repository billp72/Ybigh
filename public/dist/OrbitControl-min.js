THREE.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var n=this,o=1e-6,a=new THREE.Vector2,i=new THREE.Vector2,s=new THREE.Vector2,c=new THREE.Vector2,r=new THREE.Vector2,h=new THREE.Vector2,l=new THREE.Vector2,d=new THREE.Vector2,u=new THREE.Vector2,m=0,p=0,E=1,f=new THREE.Vector3,b=new THREE.Vector3,y=-1,v={type:"change"};function g(){return 2*Math.PI/60/60*n.autoRotateSpeed}function R(){return Math.pow(.95,n.zoomSpeed)}function M(e){if(!1!==n.enabled){e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(0===y){if(!0===n.noRotate)return;i.set(e.clientX,e.clientY),s.subVectors(i,a),n.rotateLeft(2*Math.PI*s.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*s.y/t.clientHeight*n.rotateSpeed),a.copy(i)}else if(1===y){if(!0===n.noZoom)return;d.set(e.clientX,e.clientY),u.subVectors(d,l),u.y>0?n.dollyIn():n.dollyOut(),l.copy(d)}else if(2===y){if(!0===n.noPan)return;r.set(e.clientX,e.clientY),h.subVectors(r,c),n.pan(h),c.copy(r)}n.update()}}function T(){!1!==n.enabled&&(n.domElement.removeEventListener("mousemove",M,!1),n.domElement.removeEventListener("mouseup",T,!1),y=-1)}function w(e){if(!1!==n.enabled&&!0!==n.noZoom){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),t>0?n.dollyOut():n.dollyIn()}}this.rotateLeft=function(e){void 0===e&&(e=g()),p-=e},this.rotateUp=function(e){void 0===e&&(e=g()),m-=e},this.panLeft=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.multiplyScalar(-e),f.add(t)},this.panUp=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),f.add(t)},this.pan=function(e){var t=n.domElement===document?n.domElement.body:n.domElement;if(void 0!==n.object.fov){var o=n.object.position.clone().sub(n.target).length();o*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e.x*o/t.clientHeight),n.panUp(2*e.y*o/t.clientHeight)}else void 0!==n.object.top?(n.panLeft(e.x*(n.object.right-n.object.left)/t.clientWidth),n.panUp(e.y*(n.object.top-n.object.bottom)/t.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=R()),E/=e},this.dollyOut=function(e){void 0===e&&(e=R()),E*=e},this.update=function(){var e=this.object.position,t=e.clone().sub(this.target),n=Math.atan2(t.x,t.z),a=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y);this.autoRotate&&this.rotateLeft(g()),n+=p,a+=m,a=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,a)),a=Math.max(o,Math.min(Math.PI-o,a));var i=t.length()*E;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(f),t.x=i*Math.sin(a)*Math.sin(n),t.y=i*Math.cos(a),t.z=i*Math.sin(a)*Math.cos(n),e.copy(this.target).add(t),this.object.lookAt(this.target),p=0,m=0,E=1,f.set(0,0,0),b.distanceTo(this.object.position)>0&&(this.dispatchEvent(v),b.copy(this.object.position))},this.domElement.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),this.domElement.addEventListener("mousedown",(function(e){if(!1!==n.enabled){if(e.preventDefault(),0===e.button){if(!0===n.noRotate)return;y=0,a.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===n.noZoom)return;y=1,l.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===n.noPan)return;y=2,c.set(e.clientX,e.clientY)}n.domElement.addEventListener("mousemove",M,!1),n.domElement.addEventListener("mouseup",T,!1)}}),!1),this.domElement.addEventListener("mousewheel",w,!1),this.domElement.addEventListener("DOMMouseScroll",w,!1),this.domElement.addEventListener("keydown",(function(e){if(!1!==n.enabled&&!0!==n.noKeys&&!0!==n.noPan){var t=!1;switch(e.keyCode){case n.keys.UP:n.pan(new THREE.Vector2(0,n.keyPanSpeed)),t=!0;break;case n.keys.BOTTOM:n.pan(new THREE.Vector2(0,-n.keyPanSpeed)),t=!0;break;case n.keys.LEFT:n.pan(new THREE.Vector2(n.keyPanSpeed,0)),t=!0;break;case n.keys.RIGHT:n.pan(new THREE.Vector2(-n.keyPanSpeed,0)),t=!0}t&&n.update()}}),!1),this.domElement.addEventListener("touchstart",(function(e){if(!1!==n.enabled)switch(e.touches.length){case 1:if(!0===n.noRotate)return;y=3,a.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===n.noZoom)return;y=4;var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);l.set(0,i);break;case 3:if(!0===n.noPan)return;y=5,c.set(e.touches[0].pageX,e.touches[0].pageY);break;default:y=-1}}),!1),this.domElement.addEventListener("touchend",(function(){!1!==n.enabled&&(y=-1)}),!1),this.domElement.addEventListener("touchmove",(function(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(!0===n.noRotate)return;if(3!==y)return;i.set(e.touches[0].pageX,e.touches[0].pageY),s.subVectors(i,a),n.rotateLeft(2*Math.PI*s.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*s.y/t.clientHeight*n.rotateSpeed),a.copy(i);break;case 2:if(!0===n.noZoom)return;if(4!==y)return;var o=e.touches[0].pageX-e.touches[1].pageX,m=e.touches[0].pageY-e.touches[1].pageY,p=Math.sqrt(o*o+m*m);d.set(0,p),u.subVectors(d,l),u.y>0?n.dollyOut():n.dollyIn(),l.copy(d);break;case 3:if(!0===n.noPan)return;if(5!==y)return;r.set(e.touches[0].pageX,e.touches[0].pageY),h.subVectors(r,c),n.pan(h),c.copy(r);break;default:y=-1}}}),!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);